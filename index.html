<!--index.html-->

<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>OOTP Logo Maker</title>
        <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
        <script type="text/javascript" src="./scripts/jquery-1.11.3.min.js"></script>
        <script type="text/javascript" src="./scripts/fabric.min.js"></script>
        <script type="text/javascript" src="./scripts/jquery.magnific-popup.min.js"></script>
        <script type="text/javascript" src="./scripts/spectrum.js"></script>
        <script type="text/javascript" src="./scripts/opentype.js"></script>
        <script type="text/javascript" src="./scripts/skeletabs.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/round-slider@1.6.1/dist/roundslider.min.js"></script>
        <link href='./scripts/logomaker.css' rel='stylesheet' type='text/css'>
        <link href='./scripts/spectrum.css' rel='stylesheet' type='text/css'>
        <link href='./scripts/skeletabs.css' rel='stylesheet' type='text/css'>
        <link href='./scripts/magnific-popup.css' rel='stylesheet' type='text/css'>
		<link href='https://cdn.jsdelivr.net/npm/round-slider@1.6.1/dist/roundslider.min.css' rel="stylesheet" type="text/css">
    </head>
    <body>
        <div class="title">
            <span class="header">Welcome To The OOTP Logo Maker!</span>
        </div>
        <div id="page">
            <div style="width: 1100px; margin:0 auto;">
                <div class="section group" style="position:relative;">
                    <div class="col span_1_of_2" style="float:left;">
                        <div id="canvasContainer" style="width:500px; height:575px;">
                            <div id="editorContainer">
						        <canvas id="logoEditor" width="500" height="500" style="position:absolute; top:50; float:left; z-index:-1;"></canvas>
					        </div>
                            <div id="creatorContainer">
						        <canvas id="logoCreator" width="500" height="500" style="position:absolute; top:50; float:left; z-index:0;"></canvas>
					        </div>
                        </div>
                        <div id="tipContainer" style="height:60px; padding-top:5px; font-weight:bold;"></div>
                        <div id="donateContainer" style="width:512px; height: 50px; text-align:right; padding-top:10px">
                            <a href="https://www.paypal.com/donate?business=UTTZRPAMBFCWA&no_recurring=1&currency_code=USD" target="_blank">
                                <img src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button">
                            </a>
                        </div>
                    </div>
                    <div class="col span_1_of_2" style="float:right; max-height:500px;">
                        <div id="text">
                            <table style="width:100%;">
                                <tr>
                                    <td>
                                        City Name: <input type="text" id="cityName">
                                    </td>
                                    <td>
                                        Nickname: <input type="text" id="nickName">
                                    </td>
                                    <td><label for="startYear">Start:</label>
                                        <input type="number" class="year" id="startYear" name="startYear" onkeypress="return isNumberKey(event)" style="width:35px;">
                                    </td>
                                    <td><label for="endYear">End:</label>
                                        <input type="number" class="year" id="endYear" name="endYear" onkeypress="return isNumberKey(event)" style="width:35px;">
                                    </td>
                                </tr>
                            <table>
                            <div class="accordion">
                            <table style="width:100%; height:500px;">
						    <tr><td>
                                <div id="tabContainer" class="skltbs-theme-light" data-skeletabs='{ "panelHeight": "auto", "keyboard": false, "startIndex": 0, "slidingAccordion": false }' style="position:absolute; top:60px;">
                                    <ul class="skltbs-tab-group">
                                        <li class="skltbs-tab-item">
                                            <button class="skltbs-tab">Logo Editor</button>
                                        </li>
                                        <li class="skltbs-tab-item">
                                            <button class="skltbs-tab">Logo Creator</button>
                                        </li>    
                                    </ul>
                                    <div class="skltbs-panel-group">
                                        <div class="skltbs-panel" id="editorPanel">
                                            Editor Panel
                                        </div>
                                        <div class="skltbs-panel" id="creatorPanel">
                                            <div id="slider"></div>
											<table style="width:468px;">
												<!--<tr class="color_tr">
													<td>&nbsp;</td>
													<td colspan="2">
														Team Display Colors:&nbsp;&nbsp;
														<input type="text" id="exampleText" value="TEAM NAME" readonly>
														<div style="float:right;">	
															<input class="teamSelector selector" type="text" id="teamBGColor">
															<input class="teamSelector selector" type="text" id="teamTextColor">
														</div>
													</td>	
												</tr>-->
												<tr class="color_tr">
													<td class="checkCell">&nbsp</td>
													<td>
														<label>Logo Shape:&nbsp;</label>
														<select id="logoShapeSelect">
															<option value="roundel" selected>Roundel</option>
															<option value="circle">Circle</option>
															<option value="homePlate">Home Plate</option>
															<option value="square">Square</option>
															<option value="roundedSquare">Rounded Square</option>
														</select>
													</td>
												</tr>
											</table>
                                        </div>
                                    </div>
                                </div>
                            </td></tr>
                            </table>
                            <div style="text-align:center; margin-top:5px;">
                                <input type="button" class="button" id="straightenObject" value="Reset Object Rotation" style="display:none;">
                                <!--<input type="button" class="button" id="saveCap" value="Save Ballcap">-->
                                <input type="button" class="button" id="save" value="Save Ballcap">
                                <input type="button" class="button" id="loadCap" value="Load Ballcap">
                                <!--<input type="button" class="button" id="imgur" value="Upload To Imgur" style="display:none;">-->
                                <input type="button" class="button" id="toggleGuides" value="Hide Guides">
                                <input type="button" class="button" id="clearTexture" value="Clear Custom Texture" style="display:none;">
                                <input type="button" class="button" id="aboutCapmaker" value="About Cap Maker">
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="frmBelow" name="below" value="">
                    <input type="hidden" id="frmTexture" name="texture" value="">
                    <input type="hidden" id="frmAbove" name="above" value="">
                </div>	
            </div>
            <div id="FAQ" class="cm-white-popup mfp-hide">
                <div style="width:100%; text-align:center;">	
                    <span class="header" style="color:#C6011F!important;">About The OOTP Cap Maker</span>
                </div>
                <div id="faqContainer" style="width:100%; height:90%; overflow:auto;">
                    <div class="question" style="margin-top:10px!important;">So what is this thing?</div><br>
                    <div class="answer">This is a utility designed to make it easy to create custom caps for Out Of The Park Baseball.  If you don't have OOTP, then this is really of little use to you.</div><br>
                    <div class="question">What is Out Of The Park Baseball?</div><br>
                    <div class="answer">Out Of The Park Baseball is an award winning baseball management simulation published by OOTP Developments.  For more information about OOTP, as well as the other games they make, <a href="http://www.ootpdevelopments.com" target="_blank">visit their site</a>.</div><br>
                    <div class="question">Why doesn't &#60;insert feature here&#62; work?</div><br>
                    <div class="answer">The Cap Maker <b>should</b> function in any browser that can take advantage of the HTML5 Canvas element, which should function on pretty much any modern browser (see <a href="http://caniuse.com/#feat=canvas" target="_blank">here</a> for a list of compatible browsers).  Beyond that, just make sure Javascript is enabled and you should be off and running!</div><br>
                    <div class="question">Who is responsible for this thing?</div><br>
                    <div class="answer">That would be me.  My name is Eriq Jaffe, and I've been playing OOTP Baseball since 2004.  Feel free to <a href="mailto:eriqjaffe@ootputilities.com">shoot me an email</a> with any questions or comments about this site.<br><br>The textures and shapes are based on a Photoshop template that I've been using for a number of years which was built on the work of a number of members of the OOTP forums - notably Gern44, Deft, NoPepper, Silvam, Reds1, davwms and probably several others (my record keeping isn't all that great, and I'm not 100% sure where every piece came from - if I'm using one of your components and I forgot to give you credit, thanks!).<br><br>I'd also like to give an additional shout out to <a href="https://fontsbyconrad.wordpress.com/" target="_blank">Conrad Burry</a>, who created some of the fonts that can be used on the caps.</div><br>
                </div>
            </div>
        </div>
    </body>
    <script>
    $(document).ready(function() {
        $("#tabContainer").skeletabs('goTo', 1)
    })

	$("#slider").roundSlider({
		sliderType: "min-range",
		handleShape: "round",
		width: 4,
		radius: 20,
		value: 0,
		handleSize: "+4",
		max: "360",
		startAngle: 90,
		drag: function (args) {
			rotateCircleText($("#slider").roundSlider("getValue"))
		},
		change: function (args) {
			rotateCircleText($("#slider").roundSlider("getValue"))
		}
	});

    function rotateCircleText(angle) {
        logoCreator.getObjects('text').forEach(function(o) {
            switch (o.id) {
                case "roundelTextTop":
                    o.set("angle", (angle + 180) % 360)
                    break;
                case "roundelTextTopStroke":
                    o.set("angle", (angle + 180) % 360)
                    break;
                case "roundelTextBottom":
                    o.set("angle", angle)
                    break;
                case "roundelTextBottomStroke":
                    o.set("angle", angle)
                    break;
				case "circleTextTop":
                    o.set("angle", (angle + 180) % 360)
                    break;
                case "circleTextTopStroke":
                    o.set("angle", (angle + 180) % 360)
                    break;
                case "circleTextBottom":
                    o.set("angle", angle)
                    break;
                case "circleTextBottomStroke":
                    o.set("angle", angle)
                    break;
            }
        })
        logoCreator.renderAll()
    }

    fabric.Object.prototype.set({
    	borderColor: 'red',
		cornerColor: 'yellow',
		cornerSize: 12,
		transparentCorners: true
	});

	fabric.Object.prototype.getZIndex = function() {
    	return this.canvas.getObjects().indexOf(this);
	}

    fabric.Object.NUM_FRACTION_DIGITS = 17;

	fabric.Object.prototype.controls.mtr = new fabric.Control({
		x: 0,
		y: -0.5,
		offsetY: -40,
		cursorStyle: 'grab',
		actionHandler: fabric.controlsUtils.rotationWithSnapping,
		actionName: 'rotate',
		cornerSize: 28,
		withConnection: true
	});

    var logoEditor = new fabric.StaticCanvas('logoEditor',{
		enableRetinaScaling: false,
		preserveObjectStacking: true
	});

    logoEditor.setBackgroundColor(
        {source: './images/bg.png', repeat: 'repeat'}, 
        logoEditor.renderAll.bind(logoEditor),
    );

    var logoCreator = new fabric.Canvas('logoCreator',{
		enableRetinaScaling: false,
		preserveObjectStacking: true,
	});

    logoCreator.setBackgroundColor(
        {source: './images/bg.png', repeat: 'repeat'}, 
        logoCreator.renderAll.bind(logoCreator),
    );

    initializeCreator()

    function initializeCreator() {

        roundelOuterStroke = new fabric.Circle({
            top: 250,
            left: 250,
			radius: 150,
			fill: 'white',
			originX: "center",
            originY: "center",
			id: 'roundelOuterStroke',
			visible: true,
			selectable: false
		})

        roundelInnerStroke = new fabric.Circle({
            top: 250,
            left: 250,
			radius: 144,
			fill: 'red',
			originX: 'center',
			originY: 'center',
			id: 'roundelInnerStroke',
			visible: true,
			selectable: false
		})

        roundelOuterCircle = new fabric.Circle({
            top: 250,
            left: 250,
			radius: 138,
			fill: 'blue',
			originX: 'center',
			originY: 'center',
			id: 'roundelOuterCircle',
			visible: true,
			selectable: false
		})

        roundelCenterStroke = new fabric.Circle({
            top: 250,
            left: 250,
			radius: 98,
			fill: 'green',
			originX: 'center',
			originY: 'center',
			id: 'roundelCenterStroke',
			visible: true,
			selectable: false
		})

        roundelInnerCircle = new fabric.Circle({
            top: 250,
            left: 250,
			radius: 92,
			fill: 'white',
			originX: 'center',
			originY: 'center',
			id: 'roundelInnerCircle',
			visible: true,
			selectable: false
		})

        var roundel = new fabric.Group ([roundelOuterStroke, roundelInnerStroke, roundelOuterCircle, roundelCenterStroke, roundelInnerCircle])

		roundelTextTop = new fabric.Text('CHICAGO',{
			visible: true,
			fontFamily: "Arial",
			fontSize: 40,
			originX: 'center',
			originY: 'center',
			textAlign: 'center',
			id: 'roundelTextTop',
			fill: 'white',
			stroke: 'transparent',
            paintFirst: "stroke",
			strokeWidth: 90,
			path: new fabric.Path("M 250,155.26758 A 94.733186,94.733186 0 0 1 344.73242,250 94.733186,94.733186 0 0 1 250,344.73242 94.733186,94.733186 0 0 1 155.26758,250 94.733186,94.733186 0 0 1 250,155.26758 Z", {
				visible: false,
				selectable:false,
				evented: false,
			}),
            pathAlign: 'descender',
			borderColor: 'red',
			cornerColor: 'yellow',
			cornerSize: 12,
			transparentCorners: false,
			lockScalingFlip: true,
			lockScalingX: true,
			lockScalingY: true,
			lockMovementX: true,
			lockMovementY: true,
			snapAngle: 5,
			selectable: false,
			angle: 180
		})

        roundelTextTopStroke = new fabric.Text('CHICAGO',{
			visible: true,
			fontFamily: "Arial",
			fontSize: 40,
			originX: 'center',
			originY: 'center',
			textAlign: 'center',
			id: 'roundelTextTopStroke',
			fill: 'black',
			stroke: 'black',
            strokeWidth: 4,
			path: new fabric.Path("M 250,155.26758 A 94.733186,94.733186 0 0 1 344.73242,250 94.733186,94.733186 0 0 1 250,344.73242 94.733186,94.733186 0 0 1 155.26758,250 94.733186,94.733186 0 0 1 250,155.26758 Z", {
				visible: false,
				selectable:false,
				evented: false,
			}),
            pathAlign: 'descender',
			borderColor: 'red',
			cornerColor: 'yellow',
			cornerSize: 12,
			transparentCorners: false,
			lockScalingFlip: true,
			lockScalingX: true,
			lockScalingY: true,
			lockMovementX: true,
			lockMovementY: true,
			snapAngle: 5,
			selectable: false,
			angle: 180
		})

		roundelTextBottom = new fabric.Text('BULLDOGS',{
			visible: true,
			fontFamily: "Arial",
			fontSize: 40,
			originX: 'center',
			originY: 'center',
			textAlign: 'center',
			id: 'roundelTextBottom',
			fill: 'white',
			stroke: 'transparent',
            paintFirst: "stroke",
			strokeWidth: 40,
            path: new fabric.Path("M 250 148.60352 A 101.39774 101.39774 0 0 0 148.60352 250 A 101.39774 101.39774 0 0 0 250 351.39648 A 101.39774 101.39774 0 0 0 351.39648 250 A 101.39774 101.39774 0 0 0 250 148.60352 z ", {
				visible: false,
				selectable:false,
				evented: false,
			}),
            pathAlign: 'ascender',
			borderColor: 'red',
			cornerColor: 'yellow',
			cornerSize: 12,
			transparentCorners: false,
			lockScalingFlip: true,
			lockScalingX: true,
			lockScalingY: true,
			lockMovementX: true,
			lockMovementY: true,
			snapAngle: 5,
            angle: 0,
			selectable: false
		})

        roundelTextBottomStroke = new fabric.Text('BULLDOGS',{
			visible: true,
			fontFamily: "Arial",
			fontSize: 40,
			originX: 'center',
			originY: 'center',
			textAlign: 'center',
			id: 'roundelTextBottomStroke',
			fill: 'black',
			stroke: 'black',
            strokeWidth: 4,
            path: new fabric.Path("M 250 148.60352 A 101.39774 101.39774 0 0 0 148.60352 250 A 101.39774 101.39774 0 0 0 250 351.39648 A 101.39774 101.39774 0 0 0 351.39648 250 A 101.39774 101.39774 0 0 0 250 148.60352 z", {
				visible: false,
				selectable:false,
				evented: false,
			}),
            pathAlign: 'ascender',
			borderColor: 'red',
			cornerColor: 'yellow',
			cornerSize: 12,
			transparentCorners: false,
			lockScalingFlip: true,
			lockScalingX: true,
			lockScalingY: true,
			lockMovementX: true,
			lockMovementY: true,
			snapAngle: 5,
            angle: 0,
			selectable: false
		})
        
		roundel.set({
			selectable:false,
			id:'roundel'
		});

        circleOuterStroke = new fabric.Circle({
            radius: 144,
			top: 250,
			left: 250,
			fill: 'red',
			originX: 'center',
            originY: 'center'
        })

		circleCenterStroke = new fabric.Circle({
            radius: 138,
			top: 250,
			left: 250,
			fill: 'green',
			originX: 'center',
            originY: 'center'
        })

		circleInnerStroke = new fabric.Circle({
            radius: 132,
			top: 250,
			left: 250,
			fill: 'blue',
			originX: 'center',
            originY: 'center'
        })

		circleFill = new fabric.Circle({
            radius: 126,
			top: 250,
			left: 250,
			fill: 'yellow',
			originX: 'center',
            originY: 'center'
        })

		var circle = new fabric.Group ([circleOuterStroke, circleCenterStroke, circleInnerStroke, circleFill])

		circleTextTop = new fabric.Text('CHICAGO',{
			visible: false,
			fontFamily: "Arial",
			fontSize: 30,
			charSpacing: 250,
			originX: 'center',
			originY: 'center',
			textAlign: 'center',
			id: 'circleTextTop',
			fill: 'white',
			stroke: 'transparent',
            paintFirst: "stroke",
			strokeWidth: 90,
			path: new fabric.Path("M 250,128.13672 A 121.86793,121.86793 0 0 1 371.86328,250 121.86793,121.86793 0 0 1 250,371.86328 121.86793,121.86793 0 0 1 128.13672,250 121.86793,121.86793 0 0 1 250,128.13672 Z", {
				visible: false,
				selectable:false,
				evented: false,
			}),
            pathAlign: 'ascender',
			borderColor: 'red',
			cornerColor: 'yellow',
			cornerSize: 12,
			transparentCorners: false,
			lockScalingFlip: true,
			lockScalingX: true,
			lockScalingY: true,
			lockMovementX: true,
			lockMovementY: true,
			snapAngle: 5,
			selectable: false,
			angle: 180
		})

        circleTextTopStroke = new fabric.Text('CHICAGO',{
			visible: false,
			fontFamily: "Arial",
			fontSize: 30,
			charSpacing: 250,
			originX: 'center',
			originY: 'center',
			textAlign: 'center',
			id: 'circleTextTopStroke',
			fill: 'black',
			stroke: 'black',
            strokeWidth: 4,
			path: new fabric.Path("M 250,128.13672 A 121.86793,121.86793 0 0 1 371.86328,250 121.86793,121.86793 0 0 1 250,371.86328 121.86793,121.86793 0 0 1 128.13672,250 121.86793,121.86793 0 0 1 250,128.13672 Z", {
				visible: false,
				selectable:false,
				evented: false,
			}),
            pathAlign: 'ascender',
			borderColor: 'red',
			cornerColor: 'yellow',
			cornerSize: 12,
			transparentCorners: false,
			lockScalingFlip: true,
			lockScalingX: true,
			lockScalingY: true,
			lockMovementX: true,
			lockMovementY: true,
			snapAngle: 5,
			selectable: false,
			angle: 180
		})

		circleTextBottom = new fabric.Text('BULLDOGS',{
			visible: false,
			fontFamily: "Arial",
			fontSize: 30,
			charSpacing: 250,
			originX: 'center',
			originY: 'center',
			textAlign: 'center',
			id: 'circleTextBottom',
			fill: 'white',
			stroke: 'transparent',
            paintFirst: "stroke",
			strokeWidth: 40,
            path: new fabric.Path("M 250 123.37891 A 126.62352 126.62352 0 0 0 123.37891 250 A 126.62352 126.62352 0 0 0 250 376.62109 A 126.62352 126.62352 0 0 0 376.62109 250 A 126.62352 126.62352 0 0 0 250 123.37891 z ", {
				visible: false,
				selectable:false,
				evented: false,
			}),
            pathAlign: 'descender',
			borderColor: 'red',
			cornerColor: 'yellow',
			cornerSize: 12,
			transparentCorners: false,
			lockScalingFlip: true,
			lockScalingX: true,
			lockScalingY: true,
			lockMovementX: true,
			lockMovementY: true,
			snapAngle: 5,
            angle: 0,
			selectable: false
		})

        circleTextBottomStroke = new fabric.Text('BULLDOGS',{
			visible: false,
			fontFamily: "Arial",
			fontSize: 30,
			charSpacing: 250,
			originX: 'center',
			originY: 'center',
			textAlign: 'center',
			id: 'circleTextBottomStroke',
			fill: 'black',
			stroke: 'black',
            strokeWidth: 4,
            path: new fabric.Path("M 250 123.37891 A 126.62352 126.62352 0 0 0 123.37891 250 A 126.62352 126.62352 0 0 0 250 376.62109 A 126.62352 126.62352 0 0 0 376.62109 250 A 126.62352 126.62352 0 0 0 250 123.37891 z ", {
				visible: false,
				selectable:false,
				evented: false,
			}),
            pathAlign: 'descender',
			borderColor: 'red',
			cornerColor: 'yellow',
			cornerSize: 12,
			transparentCorners: false,
			lockScalingFlip: true,
			lockScalingX: true,
			lockScalingY: true,
			lockMovementX: true,
			lockMovementY: true,
			snapAngle: 5,
            angle: 0,
			selectable: false
		})
        
		circle.set({
			visible: false,
			selectable:false,
			id:'circle'
		});

        homePlateOuterStroke = new fabric.Path("M 100 100 L 100 250 L 250 400 L 400 250 L 400 100 L 250 100 L 100 100 z M 105.99609 106 L 250.00195 106 L 394 106 L 394 247.51758 L 249.99414 391.51562 L 105.99609 247.51758 L 105.99609 106 z",{
            id: 'homePlateOuterStroke',
            fill: 'green',
            visible: true,
            selectable: false,
            evented: false
        })

        homePlateCenterStroke = new fabric.Path("M 100 100 L 100 250 L 250 400 L 400 250 L 400 100 L 250 100 L 100 100 z M 111.99805 112 L 250.00195 112 L 388 112 L 388 245.0293 L 249.99414 383.02734 L 111.99805 245.0293 L 111.99805 112 z ",{
            id: 'homePlateCenterStroke',
            fill: 'red',
            visible: true,
            selectable: false,
            evented: false
        })

        homePlateInnerStroke = new fabric.Path("M 100 100 L 100 250 L 250 400 L 400 250 L 400 100 L 250 100 L 100 100 z M 118 118.00195 L 250.00195 118.00195 L 381.99805 118.00195 L 381.99805 242.54102 L 249.99414 374.53711 L 118 242.54102 L 118 118.00195 z ",{
            id: 'homePlateInnerStroke',
            fill: 'blue',
            visible: true,
            selectable: false,
            evented: false
        })

        homePlateFill = new fabric.Path("m 100.00017,99.99967 v 150 l 150.00002,150 149.99999,-150 v -150 H 250.00019 Z",{
            id: 'homePlateFill',
            fill: 'yellow',
            visible: true,
            selectable: false,
            evented: false
        })

        var homePlate = new fabric.Group ([homePlateFill, homePlateInnerStroke, homePlateCenterStroke, homePlateOuterStroke])

		homePlate.set({
			selectable:false,
			id:'homePlate',
            visible: false
		});

        squareOuterStroke = new fabric.Rect({
            id: 'squareOuterStroke',
            fill: 'blue',
            height: 300,
            width: 300,
            originX: 'center',
            originY: 'center',
            top: 250,
            left: 250
        })

        squareCenterStroke = new fabric.Rect({
            id: 'squareCenterStroke',
            fill: 'red',
            height: 288,
            width: 288,
            originX: 'center',
            originY: 'center',
            top: 250,
            left: 250
        })

        squareInnerStroke = new fabric.Rect({
            id: 'squareInnerStroke',
            fill: 'green',
            height: 276,
            width: 276,
            originX: 'center',
            originY: 'center',
            top: 250,
            left: 250
        })

        squareFill = new fabric.Rect({
            id: 'squareFill',
            fill: 'yellow',
            height: 264,
            width: 264,
            originX: 'center',
            originY: 'center',
            top: 250,
            left: 250
        })

        var square = new fabric.Group([squareOuterStroke, squareCenterStroke, squareInnerStroke, squareFill])

        square.set({
			selectable:false,
			id:'square',
            visible: false
		});

        roundedSquareOuterStroke = new fabric.Rect({
            id: 'roundedSquareOuterStroke',
            fill: 'blue',
            height: 300,
            width: 300,
            originX: 'center',
            originY: 'center',
            top: 250,
            left: 250,
			rx: 10,
			ry: 10
        })

        roundedSquareCenterStroke = new fabric.Rect({
            id: 'roundedSquareCenterStroke',
            fill: 'red',
            height: 288,
            width: 288,
            originX: 'center',
            originY: 'center',
            top: 250,
            left: 250,
			rx: 10,
			ry: 10
        })

        roundedSquareInnerStroke = new fabric.Rect({
            id: 'roundedSquareInnerStroke',
            fill: 'green',
            height: 276,
            width: 276,
            originX: 'center',
            originY: 'center',
            top: 250,
            left: 250,
			rx: 10,
			ry: 10
        })

        roundedSquareFill = new fabric.Rect({
            id: 'roundedSquareFill',
            fill: 'yellow',
            height: 264,
            width: 264,
            originX: 'center',
            originY: 'center',
            top: 250,
            left: 250,
			rx: 10,
			ry: 10
        })

        var roundedSquare = new fabric.Group([roundedSquareOuterStroke, roundedSquareCenterStroke, roundedSquareInnerStroke, roundedSquareFill])

        roundedSquare.set({
			selectable:false,
			id:'roundedSquare',
            visible: false
		});

        logoCreator.add(roundel)
		logoCreator.add(circle)
        logoCreator.add(homePlate)
        logoCreator.add(square)
        logoCreator.add(roundedSquare)

        logoCreator.add(roundelTextTopStroke)
        logoCreator.add(roundelTextTop)
        logoCreator.add(roundelTextBottomStroke)
        logoCreator.add(roundelTextBottom)
        
        logoCreator.centerObject(roundelTextTop)
        logoCreator.centerObject(roundelTextTopStroke)
        logoCreator.centerObject(roundelTextBottom)
        logoCreator.centerObject(roundelTextBottomStroke)

		logoCreator.add(circleTextTopStroke)
        logoCreator.add(circleTextTop)
        logoCreator.add(circleTextBottomStroke)
        logoCreator.add(circleTextBottom)
        
        logoCreator.centerObject(circleTextTop)
        logoCreator.centerObject(circleTextTopStroke)
        logoCreator.centerObject(circleTextBottom)
        logoCreator.centerObject(circleTextBottomStroke)

        logoCreator.centerObject(homePlate)

        logoCreator.renderAll()
    }

	$("#logoShapeSelect").on("change",function(e){
		const selected = $(this).val()
		logoCreator.getObjects('group').forEach(function(o) {
			if (o.id == selected) {
				o.set("visible", true)
			} else {
				o.set("visible", false)
			}
		})
		logoCreator.getObjects('text').forEach(function(o) {
			if (o.id.startsWith(selected)) {
				o.set("visible", true)
			} else {
				o.set("visible", false)
			}	
		})
		logoCreator.renderAll()
	})

	$("#cityName").on("keyup change", function(e) {
		const text = $(this).val()
		logoCreator.getObjects('text').forEach(function(o) {
			if (o.id.includes("Top")) {
				o.set("text", text)
			}	
		})
		logoCreator.renderAll()
	})

	$("#nickName").on("keyup change", function(e) {
		const text = $(this).val()
		logoCreator.getObjects('text').forEach(function(o) {
			if (o.id.includes("Bottom")) {
				o.set("text", text)
			}	
		})
		logoCreator.renderAll()
	})

    logoCreator.on('selection:created', function(e) {
		var obj = e.selected[0];
	})
    </script>
</html>